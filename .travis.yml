language: python
os: linux
dist: xenial
install: pip install -r requirements.txt
jobs:
  include:
  - stage: test
    script: python -m pytest -v tests/test_dice.py
  - stage: build
    script: skip
    before_deploy:
      - rvm $(travis_internal_ruby) --fuzzy do ruby -S gem install faraday -v 1.8.0
      - echo $HEROKU_AUTH_TOKEN
    deploy:
      provider: heroku
      api_key: "PdHyDAUR6DtMFo2vNX+geqCpYbxndewmZfwNoykdGXXwIvcomNp1j6+tUhGlj+DgSA41OsUvw5MF7CIpcyay6PH1SDyxWJ1jHfOBku2fGI4sLit/hGPs6fn7rPHquUY15XYwkhxCI4iHf0RETBgru01PvHNIn8ZsobmPd52IzmIE5rmS9y14iCU957qiuErDqUq+ipO2/sJJClTdJLgb6O7Fg4NC/5UfDieI88N1XGox9yPBQC5VuFbhMyKzIE446cTFSycd/bmVizM0VGy7knPNUa5z9utRVypm60CZx1jAFhGbEPGXBV/y0ivMmA0TarSzD26Bo8KoKXEk9O4DUT+0PmlpMz8UCE4oPE5qrbAQVriUHSMLDcauYmNAN2V1GnFYopHPTmJVwPP9nyV5yc+kE7kGq7m65f5sYf4ZMgwo0EirY2IeD+1yO1J+WFJ6/5Jmxf9YqcLwfvSBT5QUeGsnGe/kpUCq3qZnpIdge/M8kgipMRCxMJe+JLeHA9NCBHF8K7MWl/MwxCAtI7FTe3VRiMLtg2pnchnLot7N2Jksd2RRFens6FJSwRILFzT04kY/RprY4Vp1WuhRpn4aKdEspqLZO7OHOGa8jMqgpOaQkPyQrGVzURbXaCH/V3RjH0o4o4LAglBtRSWVmdLW01cwNXft7HCazRcvELjpX38="
      app: test-ci-d
      on:
        branch: dev
  - stage: production
    script: skip
    deploy:
      provider: heroku
      api_key: "PdHyDAUR6DtMFo2vNX+geqCpYbxndewmZfwNoykdGXXwIvcomNp1j6+tUhGlj+DgSA41OsUvw5MF7CIpcyay6PH1SDyxWJ1jHfOBku2fGI4sLit/hGPs6fn7rPHquUY15XYwkhxCI4iHf0RETBgru01PvHNIn8ZsobmPd52IzmIE5rmS9y14iCU957qiuErDqUq+ipO2/sJJClTdJLgb6O7Fg4NC/5UfDieI88N1XGox9yPBQC5VuFbhMyKzIE446cTFSycd/bmVizM0VGy7knPNUa5z9utRVypm60CZx1jAFhGbEPGXBV/y0ivMmA0TarSzD26Bo8KoKXEk9O4DUT+0PmlpMz8UCE4oPE5qrbAQVriUHSMLDcauYmNAN2V1GnFYopHPTmJVwPP9nyV5yc+kE7kGq7m65f5sYf4ZMgwo0EirY2IeD+1yO1J+WFJ6/5Jmxf9YqcLwfvSBT5QUeGsnGe/kpUCq3qZnpIdge/M8kgipMRCxMJe+JLeHA9NCBHF8K7MWl/MwxCAtI7FTe3VRiMLtg2pnchnLot7N2Jksd2RRFens6FJSwRILFzT04kY/RprY4Vp1WuhRpn4aKdEspqLZO7OHOGa8jMqgpOaQkPyQrGVzURbXaCH/V3RjH0o4o4LAglBtRSWVmdLW01cwNXft7HCazRcvELjpX38="
      app: test-ci-p
      on:
        branch: main
notifications:
  slack:
    secure: EfDm336D6PRtm2m17o8VagqU/ErplR4LyE7HlIbPQnxoqkj5RUUaHVe3r+aIqs7jcVLGGJ8H5ZFMpvSzF0ojig2XbhFJAjqrMuI61bPlJzyKHLpafPqmVqOvJ53qHqqmgjYSxCdxz2Nv0sNTPX5G6VUIYxxQZ1voDVf+AMzNiaMa913hA93sV5Ozbc+hviBB5Ldyf+chyAbAwq3l5ODHUPqkZ/5NFTLI6EDTN0ApSrHb8lTvvJkrKvQU700ixYqs9RHsjc0zQmGBqNyeX0Ace1pjkcrsw29l0hFhOzUeEU8bZG7UPQHLeoF01n8vYXFXsHOZV4YfZ2xDDytlQfSbIaY/JsQhm5kqBSO1mFBYVStCRuIj9v/CxgyZbsOoCRGfGFvFFDtnqeRjwv5pIxot3H55f6kzMTZ0kllg8mx2B0xWZyTbnWw31+I2zrEdNXbPQSvoeDn/asbZn1ZuxkYzBZqFBKLq+vclyWDmt3/PciLa4j8DQ2HD1eAcmT36c4dOuJ3QZTy+gNtzpsRPUMbsbFr/B1SKQm5/eAyOk7CbHLVYjHctdkBmn/GK+tHz2796mIIHtVCYYrzrHLc1NP18QfV7byUlw1B3d7uP9BPvju4+GdzCSbpbvyxpQ51OvMZ/FaDqpO7Pj1MSLXS3kcfvn5CsZoNkDEIWSl/44LPf5+g=
